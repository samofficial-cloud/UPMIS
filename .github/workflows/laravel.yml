name: Laravel

on:
  push:
    branches: [ master ]


jobs:
  laravel-tests:

    runs-on: self-hosted

    steps:

    - uses: actions/checkout@v2
    - name:Testing the server ssh connection
      uses:appleboy/ssh-action@master
      with:
        host: 34.220.121.18
        username: cde
        password: 2021@Cde?
        port: 22206
        script: |
          cd ..
          git pull origin master
    - name: Install Dependencies
      run: composer install
    - name: Configure application
      run: |
        php artisan cache:clear
        php artisan view:clear
        php artisan config:cache
